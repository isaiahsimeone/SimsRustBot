<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rust Server Interface</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="static/css/style.css" />
    <link rel="stylesheet" href="static/css/map-note.css" />
  </head>
  <body>
    <!-- Command Modal -->
    <div class="modal fade" id="commandModal" tabindex="-1" aria-labelledby="commandModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="commandModalLabel">Command Options</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <!-- Modal Content Here -->
            modal content
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save Changes</button>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid p-0">
      <div class="row no-gutters">
        <!-- Left Panel: Command List -->
        <div class="col-md-2 bg-dark text-light">
          <div class="logo p-3">
            <a target="_blank" href="https://www.github.com/isaiahsimeone/simsrustbot">
              <img src="static/images/sims_rust_bot_logo.png" alt="Sim's Rust Bot" class="img-fluid" />
            </a>
          </div>
          <div class="command-list">
            <!-- Toggleable command -->
            <div class="command-btn toggleable inactive">Toggleable COMMAND_1</div>

            <!-- Command that opens a modal -->
            <div class="command-btn modal-trigger" data-toggle="modal" data-target="#commandModal">Modal COMMAND_2</div>

            <!-- Repeat for other commands -->
          </div>
        </div>

        <!-- Center Panel: Map -->
        <div class="col-md-8">
          <!--Map note popup -->
          <div id="map-note-dialog" class="map-note-dialog">
            EDIT MARKER
            <div class="map-note-options-container">
              <div class="map-note-options-table">
                <table>
                  <tr>
                    <th class="note-op-name">NAME</th>
                    <th class="note-input-cell">
                      <input type="text" class="note-input" placeholder="Enter Text..." />
                    </th>
                  </tr>
                  <tr>
                    <td class="note-op-name">MARKER</td>
                    <td>
                      <div class="icon-row">
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/0.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/1.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/2.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/3.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/4.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/5.png')"></div>
                      </div>
                      <!-- Second row of icons -->
                      <div class="icon-row">
                        <div class="icon-placeholder selected" style="mask-image: url('static/images/markers/6.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/7.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/8.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/9.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/10.png')"></div>
                        <div class="icon-placeholder" style="mask-image: url('static/images/markers/11.png')"></div>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td class="note-op-name">COLOUR</td>
                    <td>
                      <div class="icon-row">
                        <div class="icon-placeholder selected" style="background-color: #cbcd53;"></div>
                        <div class="icon-placeholder" style="background-color: #2e66af;"></div>
                        <div class="icon-placeholder" style="background-color: #6c9835;"></div>
                        <div class="icon-placeholder" style="background-color: #a73533;"></div>
                        <div class="icon-placeholder" style="background-color: #a253ae;"></div>
                        <div class="icon-placeholder" style="background-color: #13d7b0;"></div>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
              <div class="map-note-apply">APPLY</div>
            </div>
          </div>

          <div id="panzoom-element" class="panzoom">
            <div id="map-container" class="map-container">
              <!-- The map image will be placed here -->
              <img src="static/images/map.jpg" alt="RUST_MAP" id="map-image" />
              <!-- Overlay Images go here -->
            </div>
          </div>
        </div>
        <!-- Right Panel: Player List and Chat -->
        <div class="col-md-2 bg-light">
          <div class="server_info p-3">
            <p>Server info here</p>
          </div>
          <div class="players p-3">
            <!-- Dynamically generate player list here -->
            <p>Player name 1</p>
            <!-- Repeat for other players -->
          </div>
          <div class="chat-area">
            <div class="chat-messages p-3" id="messages_container">
              <!-- Dynamically generate chat messages here 
              <div class="chat-message other">This is a chat message from someone else</div>
              <div class="chat-message me">This is a chat message from me</div>-->
              <!-- Repeat for other messages -->
            </div>
            <div class="chat-input p-3">
              <input type="text" id="chatMessage" class="form-control" placeholder="Send message..." />
              <input type="button" id="sendMessage" value="Send" class="btn btn-primary mt-2" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>

    <script>
      function hideDialog() {
        var dialog = document.getElementById("place-marker-dialog");
        dialog.style.display = "none";
      }
      $(document).ready(function () {
        const icons = document.querySelectorAll(".icon-placeholder");
        icons.forEach((icon) => {
          icon.addEventListener("click", () => {
            // Remove 'selected' class from all icons
            icons.forEach((i) => i.classList.remove("selected"));

            // Add 'selected' class to the clicked icon
            icon.classList.add("selected");
          });
        });
        // move this to a chat.js file, and include sender_steam_id. This is also ugly as shit
        /*   document.getElementById('sendMessage').addEventListener('click', function() {
      console.log("CLICKED");
        const message = document.getElementById('chatMessage').value;
        if (message) { // Check if message is not empty
            fetch('/sendteammessage', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `message=${encodeURIComponent(message)}`,
            })
            .then(response => response.text())
            .then(data => {
                console.log(data);
                // Optionally clear the input field after sending
                document.getElementById('chatMessage').value = '';
                // Optionally append the message to the chat area as a 'sent' message
            })
            .catch(error => console.error('Error:', error));
        } else {
            console.log("Message is empty.");
        }
    });*/
      });
    </script>
    <script type="module" src="static/js/main.js"></script>
  </body>
</html>
